<!DOCTYPE html>
<html>
<head>
	<title>X___X</title>
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div id="app" class="container">
	<div class="row">
		<div class="col-md-12">
			<h1>Slim REST Generator</h1>
		</div>
	</div>

	<hr>
	<div class="row">
		<div class="col-md-5">
			<div class="form-group">
				<div class="form-inline">
					<label>Http Method : </label>
					<button id="btnGET"    v-on:click="selectType('GET')"    class="btn btn-default">GET</button>
					<button id="btnPOST"   v-on:click="selectType('POST')"   class="btn btn-default">POST</button>
					<button id="btnPUT"    v-on:click="selectType('PUT')"    class="btn btn-default">PUT</button>
					<button id="btnDELETE" v-on:click="selectType('DELETE')" class="btn btn-default">DELETE</button>
					<button id="btnPATCH"  v-on:click="selectType('PATCH')"  class="btn btn-default">PATCH</button>
				</div>
			</div>

			<div class="form-group">
				<div class="form-inline">
					<label>Function Name : </label>
					<input v-model="funName" v-on:keyup="createApi" class="form-control" placeholder="Function Name" required>
				</div>
			</div>

			<div class="form-group">
				<div class="form-inline">
					<a href="#" v-on:click="addParam"><span class="glyphicon glyphicon-plus"></span> Add Parmas</a>
				</div>
			</div>

			<div class="form-group">
				<div v-for="item in params" class="form-group">
					<input v-model="item.name" v-on:keyup="createApi" class="form-control" placeholder="Param Name" required>
				</div>
			</div>
		</div>

		<div class="col-md-7">
			<div class="form-group">
				<div v-if="output!=''" class="row">
					<pre v-html="output"></pre>
				</div> 
			</div>
		</div>	
	</div>


</div> <!-- End Of Container -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.4.4/vue.js"></script>
<script>
	Vue.config.silent = false
	var app = new Vue({
		el: '#app',
		data: {
			funName: '',
			type : '',
			params: [],
			output: ''
		},
		methods: {
			selectType: function(x){
				this.type = x
				app.createApi()
			},
			addParam: function(){
				this.params.push( { name:'', type:'TEXT' } );
				app.createApi()
			},
			createApi: function(){
				app.output  = ''
				app.output += '$app->' + app.type.toLowerCase()
				app.output += '("{{url}}", function (Request $request, Response $response, $args) { <br>'

				for( i = 0; i < app.params.length-1; i++) {
					app.output += '	$'+ app.params[i].name +' = $request->getAttribute("'+ app.params[i].name +'");<br>'
				}
			
				app.output = app.output.replace('{{url}}', 'root/'+ app.funName + '/')
				app.output += '   $response->getBody()->write("Hello");<br>'
				app.output += '   return $response;<br>'
				app.output += '});<br>'
			}
		}
	});
</script>
</body>
</html>